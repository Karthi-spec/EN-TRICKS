<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riddle Challenge</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        input[type="text"] {
            padding: 10px;
            width: 80%;
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
        .hidden {
            display: none;
        }
        #message {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Solve the Riddle</h1>
        <p><strong>Riddle:</strong> I speak without a mouth and hear without ears. I have no body, but I come alive with the wind. What am I?</p>
        <input type="text" id="answer" placeholder="Enter your answer" />
        <button id="solve-btn">Submit</button>
        <p id="message"></p>
        <img id="hidden-image" src="steg_image.png" alt="Hidden Audio" class="hidden" />
    </div>

    <script>
        document.getElementById('solve-btn').addEventListener('click', function() {
            const answer = document.getElementById('answer').value.trim().toLowerCase();
            const correctAnswer = 'echo';
            const messageElem = document.getElementById('message');
            
            if (answer === correctAnswer) {
                messageElem.textContent = "Correct! Downloading hidden audio...";
                messageElem.style.color = "green";
                downloadAudio();
            } else {
                messageElem.textContent = "Incorrect answer. Please try again.";
                messageElem.style.color = "red";
            }
        });

        function downloadAudio() {
            const imageElement = document.getElementById('hidden-image');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            imageElement.onload = () => {
                canvas.width = imageElement.width;
                canvas.height = imageElement.height;
                ctx.drawImage(imageElement, 0, 0);

                // Extract hidden audio data
                const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const hiddenAudioData = extractAudioData(imgData.data);

                // Create a Blob and initiate download
                const audioBlob = new Blob([hiddenAudioData], { type: 'audio/wav' });
                const url = URL.createObjectURL(audioBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'hidden_audio.wav';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };
        }

        function extractAudioData(data) {
            // This function should extract audio data embedded in the image's pixel data.
            // The logic will depend on how the audio was originally encoded.
            const audioBytes = [];
            for (let i = 0; i < data.length; i += 4) {
                const byte = data[i] & 1;  // Assuming LSB steganography
                audioBytes.push(byte);
            }
            return new Uint8Array(audioBytes);
        }
    </script>
</body>
</html>
